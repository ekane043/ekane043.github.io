<html>
	<header>
		<style>
		h1 {
		text-align: center;
		}
		main {
		   margin-left:auto;
		   margin-right:auto;
           width: 66%;
           border: 10px solid blue;
           height: 200px;
           overflow:scroll;
           }
         ul {
           list-style-type: none;
           }
    	aside {
         width: 66%;
   		 margin-top: 50px;
    	 margin-left:auto;
		 margin-right:auto;
        }
		footer {
            clear: both;
            position:absolute;
			bottom:0;
			left:0;   
         }
     	.done {
         text-decoration:line-through;
         }
     	.High {
         color:green;
         }
    	 .Medium {
         color: yellow;
         }
    	 .Low {
         color: red;
         }
		</style>
	</header>
	<body>
		<h1> ToDo List</h1>
		<main>
			<ul id="busylist"></ul>
		</main>
		<aside>
			<label for="newtask">New Task</label>
			<input type="text" id="newtask" size="36" value="enter task">
			<button onclick="addTask()">ADD</button>
		<select id="priority">
    		<option>High</option>
    		<option>Medium</option>
   			<option>Low</option>
		</select>
		</aside>
		
		
		
		<script type="text/javascript">
		doneTask= function(){
		if (this.checked){
			this.parentNode.classList.add("done");
		} else {
			this.parentNode.classList.remove("done");
			}
		}
		localSave= function(){
			var res = []
			var i;
			allEntries = document.querySelectorAll('li')
			for(i=0; i < allEntries.length; i++) {
				if (! allEntries[i].classList.contains("done")){
					res.push(allEntries[i].innerText);
			}
				}
			}
			console.log(res)
			localStorage.setItem("ToDoDatabase",JSON.stringify(res))
			
	restoreTasks = function() {
 		allTasks = JSON.parse(localStorage.getItem('todoDatabase'))
 		taskList = document.querySelector("#busylist");
  		for(i = 0; i < allTasks.length; i++) {
    	insertTaskInTree(allTasks[i],"Medium");
		}
	}
		insertTaskInTree = function(taskText, priorityValue)  {
    
    bl = document.querySelector("#busylist");    
    li = document.createElement('li');
	li.className = priorityValue;
    cb = document.createElement('input');
    cb.type = 'checkbox';
    cb.onclick = doneTask;
    t = document.createTextNode(taskText);
    li.appendChild(newcb);
    li.appendChild(t);
    taskList.Child(newli);
	}	
		addTask=function(){
			i= document.querySelector("#newtask")
			bl= document.querySelector("#busylist")
			p= document.querySelector("#priority").value
			i = task.value;
			//
			li= document.createElement("li")
			li.className =p;
			cb= document.createElement("input")
			cb.type="checkbox"
			t=document.createTextNode(task.value)
			li.appendChild(cb)
			t = document.createTextNode(i);
			li.appendChild(t)
			bl.appendChild(li)
			cb.onclick=doneTask;
			bl.appendChild(li);
			//
			task.value="";
			localSave()
		}
		window.onload=restoreTasks;
		</script>
		<footer>
			<p>Copyright 2014 Elijah Kane</p>
		</footer>	
	</body>
</html>